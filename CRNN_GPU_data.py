# encoding=utf-8
from matplotlib import pyplot
import matplotlib.pyplot as plt
from pylab import *
from matplotlib.ticker import MultipleLocator
from matplotlib.ticker import FormatStrFormatter
# 29.854381561279297,
train_loss=[4.932419776916504,3.053692102432251,2.3405940532684326,1.97265625,
            1.6808435916900635,1.4975625276565552,1.3938472270965576,1.2776575088500977,1.1736438274383545,
            1.1178208589553833,1.107597827911377,0.9950894713401794,0.9286623001098633,0.9085596799850464,
            0.8851564526557922,0.8609579205513,0.8270975351333618,0.7928649187088013,0.7889191508293152,
            0.7377909421920776,0.7550197243690491,0.7019147276878357,0.7246099710464478,0.7167160511016846,
            0.695979654788971,0.43483680486679077,0.37756308913230896,0.3850524425506592,0.35562431812286377,
            0.32750946283340454,0.32271063327789307,0.3301323354244232,0.29206693172454834,0.301777184009552,
            0.2932196855545044,0.278191477060318,0.2964736223220825,0.2377670705318451,0.2136862576007843,
            0.2109430879354477,0.24856139719486237,0.22540666162967682,0.19651466608047485,0.19616584479808807,
            0.1924814134836197,0.23264628648757935,0.20067156851291656,0.1859951615333557,0.18523409962654114,
            0.17349381744861603,0.19919271767139435,0.2003532499074936,0.2067645937204361,0.16060151159763336,
            0.1976003497838974,0.14655517041683197,0.157023623585701,0.1723661869764328,0.14964520931243896,
            0.14202235639095306,0.16816020011901855,0.16690057516098022,0.1569172441959381,0.15179109573364258,
            0.15410272777080536,0.1466212123632431,0.18258069455623627,0.16646264493465424,0.21036505699157715,
            0.14284029603004456,0.13003262877464294,0.16121600568294525,0.15373735129833221,0.1801706850528717,
            0.13859111070632935,0.13400915265083313,0.13339604437351227,0.1708286553621292,0.16226385533809662,
            0.17495761811733246,0.12571221590042114,0.1411384493112564,0.1464681178331375]

# 0.04371193120745252,
ocr_acc = [0.1689358652812612,0.31726979577212466,0.3905410247223218,0.4948047294876388,
           0.4064851307774991,0.5021497671085633,0.38355428161949123,0.4974919383733429,0.5263346470798996,
           0.5229308491580079,0.5293801504836976,0.5806162665711214,0.3109996417054819,0.45431744894303117,
           0.5268720888570405,0.5571479756359727,0.4684700824077392,0.5637764242207094,0.3566821927624507,
           0.4116804012898603,0.4783231816553207,0.2663919742027947,0.5854532425653888,0.5460408455750627,
           0.533858831959871,0.6058760300967395,0.5078824793980652,0.6168040128986026,0.4521676818344679,
           0.5879613041920458,0.5825868864206377,0.5394123969903261,0.5299175922608385,0.5071658903618774,
           0.5619849516302401,0.6153708348262271,0.6092798280186313,0.6642780365460409,0.6209243998566822,
           0.5829451809387316,0.6234324614833393,0.6178788964528843,0.4299534217126478,0.590290218559656,
           0.6134002149767108,0.525618058043712,0.63274811895378,0.6099964170548191,0.6239699032604801,
           0.6295234682909352,0.6506628448584737,0.6074883554281619,0.649408814045145,0.6227158724471515,
           0.6141168040128986,0.5433536366893587,0.5487280544607668,0.6597993550698674,0.6619491221784307,
           0.5867072733787173,0.5313507703332139,0.5865281261196704,0.6295234682909352,0.5768541741311358,
           0.6085632389824436,0.47294876388391255,0.4616624865639556,0.6691150125403081,0.5032246506628448,
           0.542457900394124,0.4892511644571838,0.5963812253672519,0.5369043353636689,0.6031888212110355,
           0.5698674310283053,0.46148333930490865,0.567896811178789,0.6406305983518452,0.5713006091006808,
           0.6092798280186313,0.5913651021139377,0.6304192045861698,0.5834826227158725]



plt.rcParams['font.sans-serif']=['SimHei']
plt.rcParams['axes.unicode_minus']=False

xmajorLocator = MultipleLocator(5) # x轴主刻度间隔
# xmajorFormatter = FormatStrFormatter('%3.1f')  # 设定x轴标签文本格式
xminorLocator = MultipleLocator(1) # x轴次刻度间隔

ymajorLocator = MultipleLocator(0.5)
ymajorFormatter = FormatStrFormatter('%1.1f')
yminorLocator = MultipleLocator(0.1)

x = arange(0,83,1)
# y_all = y_loss
# y_cls
ax = subplot(111)
# plt.yticks()
y1=plt.plot(x,train_loss,'-',color = "red")
y2=plt.plot(x,ocr_acc,'--',color='blue')

plt.title("CRNN训练损失值与验证集精确度折线图")
plt.legend([y1,y2],labels=['训练损失', '验证集精确度'])
plt.xlabel("epoch/次")
plt.ylabel("训练损失 & 验证集精确度")
## 设置主刻度标签位置
ax.xaxis.set_major_locator(xmajorLocator)
# ax.xaxis.set_major_formatter(xmajorFormatter)

ax.yaxis.set_major_locator(ymajorLocator)
ax.yaxis.set_major_formatter(ymajorFormatter)

## 设置此刻度标签位置
ax.xaxis.set_minor_locator(xminorLocator)
ax.yaxis.set_minor_locator(yminorLocator)

ax.xaxis.grid(True,which='major')  ## x轴网格使用主刻度
ax.yaxis.grid(True,which='minor')  ## y轴网格使用次刻度

show()